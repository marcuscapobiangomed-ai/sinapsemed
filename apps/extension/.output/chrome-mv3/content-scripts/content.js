var content=(function(){"use strict";var ie=Object.defineProperty;var ae=(S,v,T)=>v in S?ie(S,v,{enumerable:!0,configurable:!0,writable:!0,value:T}):S[v]=T;var E=(S,v,T)=>ae(S,typeof v!="symbol"?v+"":v,T);function S(t){return t}const v={matches:["<all_urls>"],main(){let t=null,e=null;function s(){if(t)return;const m=document.createElement("sinapsemed-floating-btn");e=m.attachShadow({mode:"closed"});const c=document.createElement("style");c.textContent=`
        .sinapsemed-btn {
          position: fixed;
          z-index: 2147483647;
          display: none;
          align-items: center;
          gap: 6px;
          padding: 8px 14px;
          background: #2563eb;
          color: white;
          border: none;
          border-radius: 8px;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
          font-size: 13px;
          font-weight: 500;
          cursor: pointer;
          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
          transition: background 0.15s, transform 0.15s, opacity 0.15s;
          opacity: 0;
          transform: translateY(4px);
        }
        .sinapsemed-btn.visible {
          display: flex;
          opacity: 1;
          transform: translateY(0);
        }
        .sinapsemed-btn:hover {
          background: #1d4ed8;
        }
        .sinapsemed-btn svg {
          width: 16px;
          height: 16px;
          fill: none;
          stroke: currentColor;
          stroke-width: 2;
          stroke-linecap: round;
          stroke-linejoin: round;
        }
      `,e.appendChild(c);const u=document.createElement("button");u.className="sinapsemed-btn",u.innerHTML=`
        <svg viewBox="0 0 24 24"><path d="M12 5v14M5 12h14"/></svg>
        Flashcard
      `,u.addEventListener("click",A),e.appendChild(u),document.documentElement.appendChild(m),t=u}function i(m,c){if(t||s(),!t)return;const u=120,w=36,x=8;let P=m-u/2,k=c+x;P=Math.max(x,Math.min(P,window.innerWidth-u-x)),k=Math.max(x,Math.min(k,window.innerHeight-w-x)),t.style.left=`${P}px`,t.style.top=`${k}px`,t.classList.add("visible")}function g(){t&&t.classList.remove("visible")}async function A(m){var u;m.preventDefault(),m.stopPropagation();const c=(u=window.getSelection())==null?void 0:u.toString().trim();if(c){g();try{await chrome.runtime.sendMessage({type:"SET_SELECTED_TEXT",payload:{text:c,url:window.location.href,title:document.title}})}catch{}}}document.addEventListener("mouseup",m=>{setTimeout(()=>{const c=window.getSelection(),u=c==null?void 0:c.toString().trim();if(u&&u.length>2){const x=c.getRangeAt(0).getBoundingClientRect();i(x.left+x.width/2,x.bottom)}else g()},10)}),document.addEventListener("mousedown",m=>{var c;if(t&&e){const u=m.composedPath(),w=(c=t.getRootNode())==null?void 0:c.host;w&&!u.includes(w)&&g()}});try{chrome.runtime.onMessage.addListener((m,c,u)=>{var w;if(m.type==="GET_SELECTED_TEXT"){const x=((w=window.getSelection())==null?void 0:w.toString().trim())??"";u({text:x})}return!0})}catch{}}};function T(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var N={exports:{}},z=N.exports,W;function G(){return W||(W=1,(function(t,e){(function(s,i){i(t)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:z,function(s){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)s.exports=globalThis.browser;else{const i="The message port closed before a response was received.",g=A=>{const m={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(m).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class c extends WeakMap{constructor(n,o=void 0){super(o),this.createItem=n}get(n){return this.has(n)||this.set(n,this.createItem(n)),super.get(n)}}const u=r=>r&&typeof r=="object"&&typeof r.then=="function",w=(r,n)=>(...o)=>{A.runtime.lastError?r.reject(new Error(A.runtime.lastError.message)):n.singleCallbackArg||o.length<=1&&n.singleCallbackArg!==!1?r.resolve(o[0]):r.resolve(o)},x=r=>r==1?"argument":"arguments",P=(r,n)=>function(l,...h){if(h.length<n.minArgs)throw new Error(`Expected at least ${n.minArgs} ${x(n.minArgs)} for ${r}(), got ${h.length}`);if(h.length>n.maxArgs)throw new Error(`Expected at most ${n.maxArgs} ${x(n.maxArgs)} for ${r}(), got ${h.length}`);return new Promise((f,p)=>{if(n.fallbackToNoCallback)try{l[r](...h,w({resolve:f,reject:p},n))}catch(a){console.warn(`${r} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,a),l[r](...h),n.fallbackToNoCallback=!1,n.noCallback=!0,f()}else n.noCallback?(l[r](...h),f()):l[r](...h,w({resolve:f,reject:p},n))})},k=(r,n,o)=>new Proxy(n,{apply(l,h,f){return o.call(h,r,...f)}});let $=Function.call.bind(Object.prototype.hasOwnProperty);const B=(r,n={},o={})=>{let l=Object.create(null),h={has(p,a){return a in r||a in l},get(p,a,b){if(a in l)return l[a];if(!(a in r))return;let d=r[a];if(typeof d=="function")if(typeof n[a]=="function")d=k(r,r[a],n[a]);else if($(o,a)){let C=P(a,o[a]);d=k(r,r[a],C)}else d=d.bind(r);else if(typeof d=="object"&&d!==null&&($(n,a)||$(o,a)))d=B(d,n[a],o[a]);else if($(o,"*"))d=B(d,n[a],o["*"]);else return Object.defineProperty(l,a,{configurable:!0,enumerable:!0,get(){return r[a]},set(C){r[a]=C}}),d;return l[a]=d,d},set(p,a,b,d){return a in l?l[a]=b:r[a]=b,!0},defineProperty(p,a,b){return Reflect.defineProperty(l,a,b)},deleteProperty(p,a){return Reflect.deleteProperty(l,a)}},f=Object.create(r);return new Proxy(f,h)},q=r=>({addListener(n,o,...l){n.addListener(r.get(o),...l)},hasListener(n,o){return n.hasListener(r.get(o))},removeListener(n,o){n.removeListener(r.get(o))}}),re=new c(r=>typeof r!="function"?r:function(o){const l=B(o,{},{getContent:{minArgs:0,maxArgs:0}});r(l)}),H=new c(r=>typeof r!="function"?r:function(o,l,h){let f=!1,p,a=new Promise(_=>{p=function(y){f=!0,_(y)}}),b;try{b=r(o,l,p)}catch(_){b=Promise.reject(_)}const d=b!==!0&&u(b);if(b!==!0&&!d&&!f)return!1;const C=_=>{_.then(y=>{h(y)},y=>{let D;y&&(y instanceof Error||typeof y.message=="string")?D=y.message:D="An unexpected error occurred",h({__mozWebExtensionPolyfillReject__:!0,message:D})}).catch(y=>{console.error("Failed to send onMessage rejected reply",y)})};return C(d?b:a),!0}),te=({reject:r,resolve:n},o)=>{A.runtime.lastError?A.runtime.lastError.message===i?n():r(new Error(A.runtime.lastError.message)):o&&o.__mozWebExtensionPolyfillReject__?r(new Error(o.message)):n(o)},V=(r,n,o,...l)=>{if(l.length<n.minArgs)throw new Error(`Expected at least ${n.minArgs} ${x(n.minArgs)} for ${r}(), got ${l.length}`);if(l.length>n.maxArgs)throw new Error(`Expected at most ${n.maxArgs} ${x(n.maxArgs)} for ${r}(), got ${l.length}`);return new Promise((h,f)=>{const p=te.bind(null,{resolve:h,reject:f});l.push(p),o.sendMessage(...l)})},ne={devtools:{network:{onRequestFinished:q(re)}},runtime:{onMessage:q(H),onMessageExternal:q(H),sendMessage:V.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:V.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},U={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return m.privacy={network:{"*":U},services:{"*":U},websites:{"*":U}},B(A,ne,m)};s.exports=g(chrome)}})})(N)),N.exports}var Y=G();const I=T(Y);function R(t,...e){}const Z={debug:(...t)=>R(console.debug,...t),log:(...t)=>R(console.log,...t),warn:(...t)=>R(console.warn,...t),error:(...t)=>R(console.error,...t)},L=class L extends Event{constructor(e,s){super(L.EVENT_NAME,{}),this.newUrl=e,this.oldUrl=s}};E(L,"EVENT_NAME",j("wxt:locationchange"));let K=L;function j(t){var e;return`${(e=I==null?void 0:I.runtime)==null?void 0:e.id}:content:${t}`}function X(t){let e,s;return{run(){e==null&&(s=new URL(location.href),e=t.setInterval(()=>{let i=new URL(location.href);i.href!==s.href&&(window.dispatchEvent(new K(i,s)),s=i)},1e3))}}}const M=class M{constructor(e,s){E(this,"isTopFrame",window.self===window.top);E(this,"abortController");E(this,"locationWatcher",X(this));E(this,"receivedMessageIds",new Set);this.contentScriptName=e,this.options=s,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(e){return this.abortController.abort(e)}get isInvalid(){return I.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(e){return this.signal.addEventListener("abort",e),()=>this.signal.removeEventListener("abort",e)}block(){return new Promise(()=>{})}setInterval(e,s){const i=setInterval(()=>{this.isValid&&e()},s);return this.onInvalidated(()=>clearInterval(i)),i}setTimeout(e,s){const i=setTimeout(()=>{this.isValid&&e()},s);return this.onInvalidated(()=>clearTimeout(i)),i}requestAnimationFrame(e){const s=requestAnimationFrame((...i)=>{this.isValid&&e(...i)});return this.onInvalidated(()=>cancelAnimationFrame(s)),s}requestIdleCallback(e,s){const i=requestIdleCallback((...g)=>{this.signal.aborted||e(...g)},s);return this.onInvalidated(()=>cancelIdleCallback(i)),i}addEventListener(e,s,i,g){var A;s==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(A=e.addEventListener)==null||A.call(e,s.startsWith("wxt:")?j(s):s,i,{...g,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),Z.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:M.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(e){var A,m,c;const s=((A=e.data)==null?void 0:A.type)===M.SCRIPT_STARTED_MESSAGE_TYPE,i=((m=e.data)==null?void 0:m.contentScriptName)===this.contentScriptName,g=!this.receivedMessageIds.has((c=e.data)==null?void 0:c.messageId);return s&&i&&g}listenForNewerScripts(e){let s=!0;const i=g=>{if(this.verifyScriptStartedEvent(g)){this.receivedMessageIds.add(g.data.messageId);const A=s;if(s=!1,A&&(e!=null&&e.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",i),this.onInvalidated(()=>removeEventListener("message",i))}};E(M,"SCRIPT_STARTED_MESSAGE_TYPE",j("wxt:content-script-started"));let O=M;const J=Symbol("null");let Q=0;class ee extends Map{constructor(){super(),this._objectHashes=new WeakMap,this._symbolHashes=new Map,this._publicKeys=new Map;const[e]=arguments;if(e!=null){if(typeof e[Symbol.iterator]!="function")throw new TypeError(typeof e+" is not iterable (cannot read property Symbol(Symbol.iterator))");for(const[s,i]of e)this.set(s,i)}}_getPublicKeys(e,s=!1){if(!Array.isArray(e))throw new TypeError("The keys parameter must be an array");const i=this._getPrivateKey(e,s);let g;return i&&this._publicKeys.has(i)?g=this._publicKeys.get(i):s&&(g=[...e],this._publicKeys.set(i,g)),{privateKey:i,publicKey:g}}_getPrivateKey(e,s=!1){const i=[];for(let g of e){g===null&&(g=J);const A=typeof g=="object"||typeof g=="function"?"_objectHashes":typeof g=="symbol"?"_symbolHashes":!1;if(!A)i.push(g);else if(this[A].has(g))i.push(this[A].get(g));else if(s){const m=`@@mkm-ref-${Q++}@@`;this[A].set(g,m),i.push(m)}else return!1}return JSON.stringify(i)}set(e,s){const{publicKey:i}=this._getPublicKeys(e,!0);return super.set(i,s)}get(e){const{publicKey:s}=this._getPublicKeys(e);return super.get(s)}has(e){const{publicKey:s}=this._getPublicKeys(e);return super.has(s)}delete(e){const{publicKey:s,privateKey:i}=this._getPublicKeys(e);return!!(s&&super.delete(s)&&this._publicKeys.delete(i))}clear(){super.clear(),this._symbolHashes.clear(),this._publicKeys.clear()}get[Symbol.toStringTag](){return"ManyKeysMap"}get size(){return super.size}}new ee;function ge(){}function F(t,...e){}const se={debug:(...t)=>F(console.debug,...t),log:(...t)=>F(console.log,...t),warn:(...t)=>F(console.warn,...t),error:(...t)=>F(console.error,...t)};return(async()=>{try{const{main:t,...e}=v,s=new O("content",e);return await t(s)}catch(t){throw se.error('The content script "content" crashed on startup!',t),t}})()})();
content;
